@usedefaults
@@title Public Network: ${id}
{{publicnetwork: networkid:$$networkid}}
{% if id %}

{{actions:
- display: Change Gateway
  action: /restmachine/cloudbroker/iaas/changeIPv4Gateway
  hide: true
  input:
  - label: Gateway IP Address
    type: text
    name: gateway
  data:
    subnet: ${id}

- display: Add Public IP Addresses
  action: /restmachine/cloudbroker/iaas/addPublicIPv4IPS
  hide: true
  input:
  - label: Start IP Address
    type: text
    name: startip
  - label: End IP Address
    type: text
    name: endip
  data:
    subnet: ${id}
}}

{{datatables_use}}

h3. Public Network

|*Network*|${id}|
|*Gateway*|${gateway} {{action: id:'action-ChangeGateway' class:'glyphicon glyphicon-edit margin-bottom-medium margin-left-medium' label:''}} |

@HR

{% if pubips %}
h4. Free IPs
{{action: id:'action-AddPublicIPAddresses' class:'glyphicon glyphicon-plus margin-bottom-medium margin-left-medium' label:'Add Public IP Addresses'}}
||Public IP||
{% for freeip in pubips -%}
|${freeip}|
{% endfor %}
@HR
{% endif %}

h4. Public IPs Used by CloudSpace
||Public IP||Cloud Space||
{% for space in spaces -%}
|${space.publicipaddress}|[(${space.id})|cloud space?id=${space.id}]|
{% endfor %}

@HR

h4. Public IPs Used by Virtual Machines
||Public IP||Virtual Machine||Cloud Space||
{% for vm in vms -%}
|${vm.publicipaddress}|[${vm.name}|virtual machine?id=${vm.id}]|[${vm.cloudspaceId}|cloud space?id=${vm.cloudspaceId}]|
{% endfor %}

{% else %}
No Public Network provided
{% endif %}
