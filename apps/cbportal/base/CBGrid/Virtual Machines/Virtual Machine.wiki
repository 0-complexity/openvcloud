@usedefaults
@@title Virtual Machine: ${name}
{{vmachine: id:$$id}}

{% if status != "DESTROYED" %}

{{include:vmachine_actions}}

{% endif %}

h2. Virtual Machine: ${name}

|*ID*| $$id|
|*Description*| ${descr}|
|*Tags*| ${tags}|
|*Stack*| [${stackname}|stack?id=${stackId}]|
|*Account*| [${accountName}|account?id=${accountId}]|
|*Cloudspace*| [${spacename}|cloud space?id=${cloudspaceId}]|
|*Created at*| ${createdat}|
|*Initial Credentials*| {{html: <span class="margin-right-xlarge"><strong>Login:</strong> ${accounts[0].login}</span> <strong>Password:</strong> ${accounts[0].password}}}|
|*Deleted at*| ${deletedat}|
|*Size*| ${size}|
|*Image*| ${image}|
|*Status*| ${status}|
|*Host Name*| ${hostName}|
|*Hypervisor Type*| ${hypervisortype}|
|*Status check*|${stats_state}|
|*Ping*|${stats_ping}|
|*HardDrive Test*|${stats_hdtest}|
|*Last Checked*|${stats_epoch}|


h3. NICs
{{action id:'action-AttachToPublicNetwork' class:'glyphicon glyphicon-plus margin-bottom-medium margin-left-medium' label:'Attach To Public Network'}}
${nics}

h3. Disks
{{action id:'action-AddDisk' class:'glyphicon glyphicon-plus margin-bottom-medium margin-left-medium' label:'Create Disk'}}
||Name||Size||Backend Size||Type||Path||Delete||
{%for disk in disks -%}
|${disk.name}|${disk.sizeMax} GiB|${ disk.footprint + " GiB" if disk.footprint else "N/A" }|${disk.type}|${disk.referenceId}| {% if disk.type == 'Data' %} {{action deleterow:true id:'action-DeleteDisk' data-diskId:'${disk.id}' class:'glyphicon glyphicon-remove'}} {% endif %}|
{% else -%}
| | | | | | |
{% endfor %}

h3. Snapshots
{{action id:'action-Snapshot' class:'glyphicon glyphicon-camera margin-bottom-medium margin-left-medium' label:'Create Snapshot'}}

||Name||Time||Actions||
{% for snapshot in snapshots -%}
|${snapshot.name}|{{ts:${snapshot.epoch}}}|{{action: id:'action-RollbackSnapshot' class:'glyphicon glyphicon-repeat' data-snapshotName:'${snapshot.name}'}}{{action: id:'action-DeleteSnapshot' deleterow:true class:'glyphicon glyphicon-remove' data-snapshotName:'${snapshot.name}'}}|
{% else -%}
| | | |
{% endfor %}

h3. Port Forwardings
{{action id:'action-CreatePortforwarding' class:'glyphicon glyphicon-plus margin-bottom-medium margin-left-medium' label:'Create Portforward'}}
||From||To||Protolcol||Delete||
{% for portforward in portforwards -%}
|${portforward.fromAddr}:${portforward.fromPort}|${portforward.toAddr}:${portforward.toPort}|${portforward.protocol.upper()}|{{action: id:'action-DeletePortforwarding' deleterow:true class:'glyphicon glyphicon-remove' data-ruleId:'${portforward.id}'}}|
{% else -%}
| | | | |
{% endfor %}

h3. Machine Exports
{{vmexports machineid:$$id}}

h3. Jobs
{{grid.jobs: filter:%7B%22args%22%3A%20%7B%22%24regex%22%3A%20%22${referenceId}%22%7D%7D}}


