h2. Manage Machine
{{html:
<style>
    .modal .modal-header, .modal .modal-footer {
        display: block;
    }
    .modal .modal-body {
        border: 0px;
    }
</style>
<div class="tabbable">
    <ul class="nav nav-tabs">
        <li class="active">
            <a data-toggle="tab" href="#actions">Machine actions</a>
        </li>
        <li>
            <a data-toggle="tab" href="#console">Console Access</a>
        </li>
        <li>
            <a data-toggle="tab" href="#snapshots">Manage Snapshots</a>
        </li>
        <li>
            <a data-toggle="tab" href="#monitoring">Monitoring</a>
        </li>
        <li>
            <a data-toggle="tab" href="#logging">Change Log</a>
        </li>
        <li>
            <a data-toggle="tab" href="#package">Change Package</a>
        </li>
    </ul>
    <div class="tab-content">
        <div id="actions" class="tab-pane active">
            <div class="row">
                <div class="span6">
                    <ul class="list">
                        <li>
                            <h5>Name</h5>
                            {[bucket.name]}
                        </li>
                        <li>
                            <h5>IP Address</h5>
                            {[bucket.ip]}
                        </li>
                        <li>
                            <h5>Status</h5>
                            {[bucket.status]}
                        </li>
                        <li>
                            <h5>CPU</h5>
                            {[bucket.cpu]} <ng-pluralize count="bucket.cpu" when="{'one': 'core', 'other': 'cores'}"></ng-pluralize>
                        </li>
                        <li>
                            <h5>Memory</h5>
                            {[bucket.memory]} GB
                        </li>
                        <li>
                            <h5>Storage</h5>
                            {[bucket.storage]} GB
                        </li>
                        <li>
                            <h5>Data Locations</h5>
                            {[bucket.locations]}
                        </li>
                    </ul>
                </div>
                <div class="span3 actions">
                    <h4>Actions</h4>
                    <ul class="actions">
                        <li ng-show="bucket.status != 'Running'"> 
                            <a ng-click="boot()">
                                <i class="icon-play-circle"></i>
                                Start
                            </a>
                        </li>
                        <li ng-show="bucket.status == 'Running'">
                            <a ng-click="powerOff()">
                                <i class="icon-stop "></i>
                                Stop
                            </a>
                        </li>
                        <li ng-show="bucket.status == 'Running'">
                            <a ng-click="pause()">
                                <i class=" icon-pause"></i>
                                Pause
                            </a>
                        </li>
                        <li>
                            <a ng-click="showSnapshotModal()"> 
                                <i class="icon-camera"></i>
                                Take Snapshot
                            </a>
                            <div modal="snapshotModalOpen" close="closeSnapshotModal()" options="modalOpts">
                                <div class="modal-header">
                                    <h3>Take snapshot</h3>
                                </div>
                                <div class="modal-body">
                                    <ul>
                                        Name:
                                        <input ng-model="newSnapshot.name" type="text" class="input-large" placeholder="Name"/>
                                    </ul>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-primary ok" ng-click="createSnapshot()">Save</button>
                                    <button class="btn cancel" ng-click="closeSnapshotModal()">Cancel</button>
                                </div>
                            </div>
                        </li>
                        <li>
                            <a ng-click="showRenameModal()">
                                <i class="icon-edit"></i>
                                Rename
                            </a>
                            <div modal="renameModalOpen" close="closeRenameModal()" options="modalOpts">
                                <div class="modal-header">
                                    <h3>Rename</h3>
                                </div>
                                <div class="modal-body">
                                    <ul>
                                        Name: <input ng-model="oldName" type="text" class="input-large" placeholder="Name"/>
                                    </ul>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-primary ok" ng-click="rename()">Save</button>
                                    <button class="btn cancel" ng-click="closeRenameModal()">Cancel</button>
                                </div>
                            </div>
                        </li>
                        <li>
                            <a ng-click="remove()">
                                <i class=" icon-remove-circle"></i>
                                Destroy
                            </a>
                        </li>
                        <li>
                            <a onclick="location.reload()">
                                <i class="icon-undo"></i>
                                Rebuild
                            </a>
                        </li>
                        <li>
                            <a ng-click="showCloneModal()">
                                <i class="icon-copy"></i>
                                Clone
                            </a>
                            <div modal="cloneModalOpen" close="closeCloneModal()" options="modalOpts">
                                <div class="modal-header">
                                    <h3>Clone</h3>
                                </div>
                                <div class="modal-body">
                                    <ul>
                                        Name: <input ng-model="cloneName" type="text" class="input-large" />
                                    </ul>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-primary ok" ng-click="cloneBucket()">Clone</button>
                                    <button class="btn cancel" ng-click="closeCloneModal()">Cancel</button>
                                </div>
                            </div>
                        </li>
                        <li>
                            <a>
                                <i class="icon-download"></i>
                                Export
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <hr>
            {{include:bucket_history}}
        </div>

        <div id="console" class="tab-pane">
            <p class="note">
                If you see a black screen just click on it and click any button to activate the console window.
            </p>
            <hr>
            <h3>Public Network</h3>
            <ul  class="list">
                <li>
                    <h5>IP Address</h5>
                    {[bucket.ip]}
                </li>
                <li>
                    <h5>Gateway</h5>
                    192.241.173.1
                </li>
                <li>
                    <h5>Netmask</h5>
                    255.255.255.0
                </li>
            </ul>
            <hr>
            }}
!console.png!

{{html:
        </div>
        <div id="logging" class="tab-pane">
            {{include:bucket_history}}
        </div>
        <div class="tab-pane" id="package">
            <div class="form-horizontal">
                <div class="control-group">
                    <label class="control-label" >Plan:</label>
                    <div class="controls " >{{include:plan_list}}</div>
                </div>
                <hr>        
                <div class="control-group">
                    <label class="control-label" >Storage:</label>
                    <div class="controls " >{{include:storage_list}}</div>
                </div>
                <hr>        
                <div class="control-group">
                    <label class="control-label" >Region</label>
                    <div class="controls ">{{include:region_list}}</div>
                </div>
                <hr>        
                <div class="control-group">
                    <label class="control-label" >Image</label>
                    <div class="controls ">{{include:image_list}}</div>
                </div>

                <div class="form-actions">
                    <button class="btn btn-info btn-large " ng-click="resize()" ng-disabled="!bucket.isValid()">Change</button>
                </div>
            </div>
        </div>

        <div id="snapshots" class="tab-pane">
            <h3>Restore from Snapshot</h3>
            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Date</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="snapshot in bucket.snapshots">
                        <td width="89%">{[snapshot.name]}</td>
                        <td style="white-space:nowrap" >
                            {[snapshot.date]}
                        </td>
                        <td>
                            <a ng-click="restoreSnapshot(snapshot)">Rollback</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div id="monitoring" class="tab-pane">
}}
{{div3: class=row}}
    {{div4: class=span3}}
        h4. CPU Usage
        {{jgauge: id:1 start:0 end:100 random:100 style:default val:20 labelsuffix:%}}
    {{div4}}
    {{div4: class=span3}}
        h4. RAM Assigned
        {{jgauge: id:2 start:0 end:2 random:0.5 style:default val:1.6 labelsuffix:GB}}
    {{div4}}
    {{div4: class=span3}}
        h4. Server Load
        {{jgauge: id:3 start:0 end:100 random:0.5 style:default val:0.8 labelsuffix:GB}}
    {{div4}}
    {{div4: class=span3}}
        h4. I/O Waiting time
        {{jgauge: id:4 start:0 end:100 random:0.5 style:default val:0.8 labelsuffix:ms}}
    {{div4}}
{{div3}}
{{html:
        </div>
    </div>
</div>
}}
