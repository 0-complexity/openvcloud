
{{actions:
- display: Start
  input:
  - reason
  action: /restmachine/cloudbroker/machine/start
  hideon:
  - RUNNING
  hideonInput: ${status}
  data:
   machineId: $$id

- display: Stop
  action: /restmachine/cloudbroker/machine/stop
  hideon:
  - HALTED
  hideonInput: ${status}
  data:
   machineId: $$id
  input:
  - reason

- display: Stop For Abusive Resource Usage
  action: /restmachine/cloudbroker/machine/stopForAbusiveResourceUsage
  data:
   machineId: $$id
   accountId: ${accountId}

  input:
  - reason

- display: Reboot
  action: /restmachine/cloudbroker/machine/reboot
  data:
   machineId: $$id
  input:
  - reason

- display: Pause
  action: /restmachine/cloudbroker/machine/pause
  hideon:
  - HALTED
  - ERROR
  - PAUSED
  hideonInput: ${status}
  data:
   machineId: $$id
  input:
  - reason

- display: Resume
  action: /restmachine/cloudbroker/machine/resume
  hideon:
  - HALTED
  - RUNNING
  - ERROR
  hideonInput: ${status}
  data:
   machineId: $$id
  input:
  - reason

- display: Delete
  action: /restmachine/cloudbroker/machine/destroy
  data:
   machineId: $$id
  input:
  - reason

- display: Snapshot
  action: /restmachine/cloudbroker/machine/snapshot
  hide: true
  data:
   machineId: $$id
  input:
  - name: snapshotName
    label: Name
    type: text
  - reason

- display: Rollback Snapshot
  action: /restmachine/cloudbroker/machine/rollbackSnapshot
  hide: true
  reload: false
  data:
   machineId: $$id
  input:
  - name: reason
    label: Reason
    type: text


- display: Delete Snapshot
  action: /restmachine/cloudbroker/machine/deleteSnapshot
  hide: true
  reload: false
  input:
  - name: reason
    label: Reason
    type: text
  data:
   machineId: $$id

- display: Clone
  action: /restmachine/cloudbroker/machine/clone
  data:
   machineId: $$id
  input:
  - reason
  - cloneName

- display: Backup And Destroy
  action: /restmachine/cloudbroker/machine/backupAndDestroy
  data:
   accountId: ${accountId}
   machineId: $$id
  input:
  - reason

- display: Create Portforwarding
  action: /restmachine/cloudbroker/machine/createPortForward
  hide: true
  data:
   machineId: $$id
  input:
  - name: destPort
    type: number
    label: Public Port
  - name: localPort
    type: number
    label: VM Port
  - name: proto
    type: dropdown
    label: Protocol
    values:
     - label: TCP
       value: tcp
     - label: UDP
       value: udp
  - reason


- display: Delete Portforwarding
  action: /restmachine/cloudbroker/machine/deletePortForward
  hide: true
  reload: false
  data:
   machineId: $$id

- display: Add Disk
  action: /restmachine/cloudbroker/machine/addDisk
  hide: true
  data:
   machineId: $$id
  input:
  - name: diskName
    label: Name
    type: text
  - name: description
    type: text
    label: Description
  - name: size
    label: Size
    type: number

- display: Delete Disk
  action: /restmachine/cloudbroker/machine/deleteDisk
  reload: false
  hide: true
  data:
   machineId: $$id
- display: Create Template
  action: /restmachine/cloudbroker/machine/createTemplate
  data:
   machineId: $$id
  input:
  - templateName
  - reason

- display: Update Machine
  action: /restmachine/cloudbroker/machine/updateMachine
  data:
   machineId: $$id
  input:
  - description
  - reason

# - display: Export
#   action: ./
#   data:
#    machineId: $$id
#   input:
#   - exportName

# - display: Restore
#   action: ./
#   data:
#    machineId: $$id
#   input:
#   - exportName

- display: Check Image Chain
  action: /restmachine/cloudbroker/machine/checkImageChain
  data:
   machineId: $$id

- display: Move to a different Stack
  action: "#movemachine"

- display: Tag
  action: /restmachine/cloudbroker/machine/tag
  data:
   machineId: $$id
  input:
  - tagName

- display: Remove Tag
  action: /restmachine/cloudbroker/machine/untag
  data:
   machineId: $$id
  input:
  - tagName
   
- display: Attach To Public Network
  action: /restmachine/cloudbroker/machine/attachPublicNetwork
  reload: true
  hide: true
  data:
   machineId: $$id
  
- display: Detach From Public Network
  action: /restmachine/cloudbroker/machine/detachPublicNetwork
  hide: true
  reload: false
  data:
   machineId: $$id
}}

{{movemachine: machineId:$$id}}

