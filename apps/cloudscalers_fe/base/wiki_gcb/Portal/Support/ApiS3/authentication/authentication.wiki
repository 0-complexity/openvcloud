{{html: 
<div class="section" id="authentication-and-acls">
<h1>Authentication and ACLs<a class="headerlink" href="#authentication-and-acls" title="Permalink to this headline"></a></h1>
<p>Requests to the RADOS Gateway (RGW) can be either authenticated or
unauthenticated. RGW assumes unauthenticated requests are sent by an anonymous
user. RGW supports canned ACLs.</p>
<div class="section" id="authentication">
<h2>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline"></a></h2>
<p>Authenticating a request requires including an access key and a Hash-based
Message Authentication Code (HMAC) in the request before it is sent to the
RGW server. RGW uses an S3-compatible authentication approach.</p>
<div class="highlight-python"><pre>HTTP/1.1
PUT /buckets/bucket/object.mpeg
Host: cname.domain.com
Date: Mon, 2 Jan 2012 00:01:01 +0000
Content-Encoding: mpeg
Content-Length: 9999999

Authorization: AWS {access-key}:{hash-of-header-and-secret}</pre>
</div>
<p>In the foregoing example, replace <tt class="docutils literal"><span class="pre">{access-key}</span></tt> with the value for your access
key ID followed by a colon (<tt class="docutils literal"><span class="pre">:</span></tt>). Replace <tt class="docutils literal"><span class="pre">{hash-of-header-and-secret}</span></tt> with
a hash of the header string and the secret corresponding to the access key ID.</p>
<p>To generate the hash of the header string and secret, you must:</p>
<ol class="arabic simple">
<li>Get the value of the header string.</li>
<li>Normalize the request header string into canonical form.</li>
<li>Generate an HMAC using a SHA-1 hashing algorithm.
See <a class="reference external" href="http://www.ietf.org/rfc/rfc2104.txt">RFC 2104</a> and <a class="reference external" href="http://en.wikipedia.org/wiki/HMAC">HMAC</a> for details.</li>
<li>Encode the <tt class="docutils literal"><span class="pre">hmac</span></tt> result as base-64.</li>
</ol>
<p>To normalize the header into canonical form:</p>
<ol class="arabic simple">
<li>Get all fields beginning with <tt class="docutils literal"><span class="pre">x-amz-</span></tt>.</li>
<li>Ensure that the fields are all lowercase.</li>
<li>Sort the fields lexicographically.</li>
<li>Combine multiple instances of the same field name into a
single field and separate the field values with a comma.</li>
<li>Replace white space and line breaks in field values with a single space.</li>
<li>Remove white space before and after colons.</li>
<li>Append a new line after each field.</li>
<li>Merge the fields back into the header.</li>
</ol>
<p>Replace the <tt class="docutils literal"><span class="pre">{hash-of-header-and-secret}</span></tt> with the base-64 encoded HMAC string.</p>
</div>
<div class="section" id="access-control-lists-acls">
<h2>Access Control Lists (ACLs)<a class="headerlink" href="#access-control-lists-acls" title="Permalink to this headline"></a></h2>
<p>RGW supports S3-compatible ACL functionality. An ACL is a list of access grants
that specify which operations a user can perform on a bucket or on an object.
Each grant has a different meaning when applied to a bucket versus applied to
an object:</p>
<div class="table-responsive">
<table border="1" class="docutils">
<colgroup>
<col width="15%">
<col width="47%">
<col width="38%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Permission</th>
<th class="head">Bucket</th>
<th class="head">Object</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">READ</span></tt></td>
<td>Grantee can list the objects in the bucket.</td>
<td>Grantee can read the object.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">WRITE</span></tt></td>
<td>Grantee can write or delete objects in the bucket.</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">READ_ACP</span></tt></td>
<td>Grantee can read bucket ACL.</td>
<td>Grantee can read the object ACL.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">WRITE_ACP</span></tt></td>
<td>Grantee can write bucket ACL.</td>
<td>Grantee can write to the object ACL.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">FULL_CONTROL</span></tt></td>
<td>Grantee has full permissions for object in the bucket.</td>
<td>Grantee can read or write to the object ACL.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


          
}}