@usedefault

h1. Port Forwards

Easily configure your port forwards to your Virtual Machines! Please take a small waiting period into account on a new deployed virtual machine, as it can still be starting or that your Defense Shield might still be in the process of assigning the IP address.

{{html:
	<div class="portMargin" ng-controller="PortforwardingController">
		<div>
				<div style="margin-bottom: 5px;">
					<button class="btn btn-info btn-large absolute1" ng-click="portForwardPopup()">Add</button>
	      </div>
				<table class="table table-striped table-bordered">
				    <tr>
				      <th style=""><a href="" ng-click="predicate = 'ip'; reverse=!reverse">IP</a></th>
				      <th><a href="" ng-click="predicate = 'puplicPort'; reverse=!reverse">Port</a></th>
				      <th style=""><a href="" ng-click="predicate = 'vmName'; reverse=!reverse">Virtual Machine</a></th>
				      <th><a href="" ng-click="predicate = 'localPort'; reverse=!reverse">Port</a></th>
				    </tr>
				    <tbody>
				    <!--  | filter:search.ip -->
				      <tr ng-click="tableRowClicked(portforward)" ng-repeat="portforward in portforwarding | orderBy:predicate:reverse | groupBy:'ip' | groupBy:'vmName'">
				      <td style="display: none;">{[portforward.id]}</td>
				      	<td style=" cursor: pointer;">{[portforward.publicIp]}</td>
				        <td ng-click="portForwardPopupEdit()" style="cursor: pointer;">{[portforward.publicPort]}</td>
				        <td style=" cursor: pointer;" ng-click="portForwardPopupEdit()">{[portforward.vmName]}</td>
				        <td ng-click="portForwardPopupEdit()" style="cursor: pointer;">{[portforward.localPort]}</td>
				      </tr>
				    </tbody>
			  </table>
			  <p ng-show="message" class="alert alert-success span2 center txt-center">{[statusMessage]}</p>
		</div>
	</div>
	<script type="text/ng-template" id="portForwardDialog.html">
		<style type="text/css">
			.modal{
				width: 800px;
				left: 41%;
			}
			.form-horizontal .control-label{
				width: 105px;
			}
			.form-horizontal .controls{
				margin-left: 0;
			}
			.row-fluid{
				width: 96%;
			}
			.form-horizontal .control-label{
				float: none;
			}
			.dropdown-menu{
				top: 28px;
			}
			.modal-body{
				overflow: visible;
				min-height: 222px;
			}
			#common-port-menu{
				padding: 4px 3px;
				border-top-right-radius: 0;
				border-bottom-right-radius: 0;
				width: 102px;
				float: left;
			}
			.form-horizontal .controls{
				display: block;
			}
			#inputNewPublicPort{
				width: 50%;
				border-top-left-radius: 0;
				border-bottom-left-radius: 0;
			}
		</style>
        <form name="form" class="form-horizontal" ng-submit="submit()">
            <div class="modal-header">
                <h3>Port Forward</h3>
            </div>
            <div class="modal-body row-fluid">
            	<div class="col-md-5">
	            	<div class="control-group" style="min-height: 63px;">
						<label class="control-label" for="inputNewIP">Public IP</label>
						<div class="controls">
					         {[currentSpace.publicipaddress]}
		       			</div>
					</div>
					<div class="control-group">
						<label class="control-label" for="inputNewPublicPort">Port</label>
						<div class="controls">
					         	<div class="left">
						        <select id="common-port-menu" ng-model="newRule.commonPort" ng-change="updateCommonPorts()" ng-options="commonport.port + ' - ' + commonport.name for commonport in commonports" class="form-control">
						        </select>
						      </div>
						      <input type="text" class="form-control left" placeholder="Port" ng-model="newRule.publicPort" id="inputNewPublicPort" required numbers-only="numbers-only">
		       			</div>
					</div>
				</div>
				<div class="col-md-3">
					<h4 style="margin-top: 54%;">Forward to</h4>
					<img src="/wiki_gcb/.files/img/icons/right-arrow2.png">
				</div>
				<div class="col-md-4">
					<div class="control-group">
						<label class="control-label" style="width: 90%; ">Virtual Machine</label>
						<div class="controls">
							<select ng-model="newRule.VM" ng-options="machine.name for machine in currentSpace.machines" class="form-control">
		                    </select>
		                </div>
					</div>
					<div class="control-group">
						<label class="control-label" for="inputNewLocalPort">Port</label>
						<div class="controls">
					         	<input ng-model="newRule.localPort" id="inputNewLocalPort" type="text" class="form-control" placeholder="Port" required numbers-only="numbers-only"/>
		       			</div>
					</div>
				</div>
            </div>
             <div class="modal-footer">
                <button type="submit" class="btn btn-primary ok">Ok</button>
                <button type="button" class="btn cancel" ng-click="cancel()">Cancel</button>
            </div>
         </form>
	</script>







	<script type="text/ng-template" id="editPortForwardDialog.html">
		<style type="text/css">
			.modal{
				width: 800px;
				left: 41%;
			}
			.form-horizontal .control-label{
				width: 105px;
			}
			.form-horizontal .controls{
				margin-left: 0;
			}
			.row-fluid{
				width: 96%;
			}
			.form-horizontal .control-label{
				float: none;
			}
			.dropdown-menu{
				top: 28px;
			}
			.modal-body{
				overflow: visible;
				min-height: 222px;
			}
			#common-port-menu{
				padding: 4px 3px;
				border-top-right-radius: 0;
				border-bottom-right-radius: 0;
				width: 102px;
				float: left;
			}
			#inputNewPublicPort{
				width: 50%;
				border-top-left-radius: 0;
				border-bottom-left-radius: 0;
			}
		</style>
        <form name="form" class="form-horizontal" ng-submit="update()">
            <div class="modal-header">
                <h3>Edit Port Forward</h3>
            </div>
            <div class="modal-body row-fluid">
            	<div class="col-md-5">
	            	<div class="control-group" style="min-height: 63px;">
						<label class="control-label" for="inputNewIP">Public IP</label>
						<div class="controls">
							{[currentSpace.publicipaddress]}
		       			       </div>
					</div>
					<div class="control-group">
						<label class="control-label" for="inputNewPublicPort">Port</label>
						<div class="controls">
					         	<!-- <div class="left">
						        <select id="common-port-menu" ng-model="editRule.commonPort" ng-change="updateCommonPorts()" ng-options="commonport.port + ' - ' + commonport.name for commonport in commonports" class="form-control">
						        </select>
						      </div> -->
						      <!-- <input type="text" class="form-control" placeholder="Port" ng-model="editRule.publicPort" id="inputNewPublicPort" required numbers-only="numbers-only"> -->
						      <autocomplete ng-model="editRule.publicPort" click-activation="true" data="commonPorts" on-type="suggestCommonPorts"></autocomplete>
		       			</div>
					</div>
				</div>
				<div class="col-md-3">
					<h4 style="margin-top: 54%;">Forward to</h4>
					<img src="/wiki_gcb/.files/img/icons/right-arrow2.png">
				</div>
				<div class="col-md-4">
					<div class="control-group">
						<label class="control-label" style="width: 90%; ">Virtual Machine</label>
						<div class="controls">
							<!-- ///////// -->
							<select ng-model="editRule.VM.id" ng-options="machine.id as machine.name for machine in currentSpace.machines" class="form-control">
		                    </select>
		                </div>
					</div>
					<div class="control-group">
						<label class="control-label" for="inputNewLocalPort">Port</label>
						<div class="controls">
					         	<input ng-model="editRule.localPort" id="inputNewLocalPort" type="text" class="form-control" placeholder="Port" required numbers-only="numbers-only"/>
		       			</div>
					</div>
				</div>
            </div>
             <div class="modal-footer">
                <button type="submit" class="btn btn-primary ok">Ok</button>
                <button type="button" class="btn cancel" ng-click="delete()">Delete</button>
                <button type="button" class="btn cancel" ng-click="cancel()">Cancel</button>
            </div>
         </form>
	</script>
    <script src="/$$space/.files/js/controllers/Portforwarding/PortforwardingController.js" type="text/javascript"></script>
		<script src="/$$space/.files/js/services/NetworkServices.js" type="text/javascript"></script>
		<script src="/$$space/.files/js/services/machineServices.js" type="text/javascript"></script>
}}
