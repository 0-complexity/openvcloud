@usedefault
{{network id:$$id gid:$$gid}}
{% if id %}

h2. Private Network: $$id

{{actions:

{% if not running %}
- display: Start VFW
  action: /restmachine/cloudbroker/cloudspace/startVFW
  input:
  - reason
  data:
   cloudspaceId: ${domain}

{% else %}
- display: Stop VFW
  action: /restmachine/cloudbroker/cloudspace/stopVFW
  input:
  - reason
  data:
   cloudspaceId: ${domain}
{% endif %}

- display: Move VFW
  action: '#movevfw'

- display: Reset VFW
  action: /restmachine/cloudbroker/cloudspace/resetVFW
  reload: false
  data:
   async: True
   cloudspaceId: ${domain}
  input:
  - reason

- display: Remove VFW
  action: /restmachine/cloudbroker/cloudspace/destroyVFW
  input:
  - reason
  data:
   async: True
   cloudspaceId: ${domain}


}}

{{movevfw: cloudspaceId:${domain}}}

h3. Details
|*Management IP*|${host}|
|*Public IPs*|${pubips}|
|*FW Node*|[${nodename}|/grid/grid node?id=${nid}&gid=${gid}]|
|*Status*| ${"RUNNING" if running else "HALTED"} |
|*CloudSpace ID*|[${domain}|cloud space?id=${domain}]|

h3. Port Fowardings

||Source IP||Source Port||Destination IP||Destination Port||
{% for rule in tcpForwardRules -%}
|${rule.fromAddr}|${rule.fromPort}|${rule.toAddr}|${rule.toPort}|
{% endfor %}
{% elif cloudspaceId %}
Private network has not been deploy yet for Cloud Space [${cloudspaceName}|/cbgrid/cloud space?id=${cloudspaceId}]
{% else %}
No Private Network provided
{% endif %}
