@usedefault

h2. Port Forwarding
{{html:
	<div ng-controller="NetworkController">
		<div>
			<select ng-model="search" ng-options="portforward.ip for portforward in portforwarding | unique: 'ip'"></select>
				<div style="margin-bottom: 5px;">
					<a href="" ng-click="rulesPopup()" class="create-cloudspace">Add Portforward...</a>
	            </div>
				<table class="table table-striped table-bordered">
				    <tr>
				      <th style="text-align: center;"><a href="" ng-click="predicate = 'ip'; reverse=!reverse">IP</a></th>
				      <th><a href="" ng-click="predicate = 'puplicPort'; reverse=!reverse">Port</a></th>
				      <th style="text-align: center;"><a href="" ng-click="predicate = 'vmName'; reverse=!reverse">Virtual Machine</a></th>
				      <th><a href="" ng-click="predicate = 'localPort'; reverse=!reverse">Port</a></th>
				    </tr>
				    <tbody>
				      <tr ng-repeat="portforward in portforwarding | orderBy:predicate:reverse | filter:search.ip | groupBy:'ip' | groupBy:'vmName'">
				      	<td style="text-align: center;"><strong>{[portforward.ip]}</strong></td>
				        <td>{[portforward.puplicPort]}</td>
				        <td style="text-align: center;"><strong>{[portforward.vmName]}</strong></td>
				        <td>{[portforward.localPort]}</td>
				      </tr>
				    </tbody>
			  </table>
		</div>
	</div>
	<script type="text/ng-template" id="rulesDialog.html"> 
		<style type="text/css">
			.modal{
				width: 800px !important;
				left: 41%;
			}
			.form-horizontal .control-label{
				width: 105px;
			}
			.form-horizontal .controls{
				margin-left: 0;
			}
			.row-fluid{
				width: 96%;
			}
			.form-horizontal .control-label{
				float: none;
			}
			.dropdown-menu{
				top: 28px;
			}
			.form-control{
				width: 86px;
				border-top-left-radius: 0 !important;
				border-bottom-left-radius: 0 !important;
				width: 102px;
			}
			.modal-body{
				overflow: visible;
				min-height: 222px;
			}
			#common-port-menu{
				padding: 4px 3px;
				border-top-right-radius: 0;
				border-bottom-right-radius: 0;
				width: 102px;
				float: left;
			}
		</style>
        <form name="form" class="form-horizontal" ng-submit="submit()">
            <div class="modal-header">
                <h3>Port Forward</h3>
            </div>
            <div class="modal-body row-fluid">
            	<div class="span5" style="padding-left: 40px;">
	            	<div class="control-group">
						<label class="control-label" for="inputNewIP">Public IP</label>
						<div class="controls left">
					        <select ng-model="newRule.ip" ng-options="portforward.ip for portforward in portforwarding | unique: 'ip'">
		                    </select>
		       			</div>
					</div>
					<div class="control-group">
						<label class="control-label" for="inputNewPublicPort">Port</label>
						<div class="controls">
					         	<div style="position: relative; width: 280px;" class="input-group-btn">
						        <select id="common-port-menu" ng-model="newRule.commonPort" ng-change="updatePorts()" ng-options="commonport.port + ' - ' + commonport.name for commonport in commonports">
						        </select>
						      </div>
						      <input type="text" class="form-control" placeholder="Port" ng-model="newRule.publicPort" id="inputNewPublicPort" required numbers-only="numbers-only">
		       			</div>
					</div>
				</div>
				<div class="span2">
					<h4 style="margin-top: 54%;">Forward to</h4>
					<img src="/$$space/.files/img/icons/right-arrow.png">
				</div>
				<div class="span4" style="margin-left: 40px;">
					<div class="control-group">
						<label class="control-label" style="width: 90%; text-align: center;">Virtual Machine</label>
						<div class="controls">
							<select ng-model="newRule.VM" ng-options="portforward.vmName for portforward in portforwarding | unique: 'vmName'">
		                    </select>
		                </div>
					</div>
					<div class="control-group">
						<label class="control-label" for="inputNewLocalPort">Port</label>
						<div class="controls">
					         	<input ng-model="newRule.localPort" id="inputNewLocalPort" type="text" class="input-large" style="height: 12px;" placeholder="Port" required numbers-only="numbers-only"/>
		       			</div>
					</div>
				</div>
            </div>
             <div class="modal-footer">
                <button type="submit" class="btn btn-primary ok">Ok</button>
                <button type="button" class="btn cancel" ng-click="cancel()">Cancel</button>
            </div>
         </form>
	</script>
    <script src="/$$space/.files/js/controllers/NetworkController.js" type="text/javascript"></script>
}}