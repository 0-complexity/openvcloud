@usedefault
h1. Usage report

{{html:


<div ng-controller="UsageController">
	<!-- {[usagereport]} -->
	<div ng-repeat="report in usagereport">
			<div class="row">
				<div class="span6">
					<h2>Usage report</h2>
					{[millisToUTCDate(report.fromTime  * 1000) | date:'MMMM']}
				</div>
				<div class="span6">
					<h2>Total cost</h2> {[ report.totalCost | currency:"USD$" ]}
				</div>
			</div>
			<hr />
			<div ng-repeat="cloudspace in report.cloudspaces">
				<div class="row">
					<div class="span6">
						<h2 class="left mrm">Cloudspace</h2>
						<div class="mtl">{[ cloudspace.name ]}</div>
					</div>
					<div class="span6">
						<h2 class="left mrm">Cost</h2>
						<div class="mtl">{[ cloudspace.totalCost | currency:"USD$" ]}</div>
					</div>				
				</div>
				<table class="table table-striped table-bordered mtl">
				    <thead>
				        <tr>
				            <th>
					            <a href="#" ng-click="orderByField='name'; reverseSort = !reverseSort">Machine
					            	<span ng-show="orderByField == 'name'"><span ng-show="!reverseSort">^</span><span ng-show="reverseSort" class="sTxt">v</span></span>
					            </a>
				            </th>
				            <th>
				            	<a href="#" ng-click="orderByField='cost'; reverseSort = !reverseSort">Cost
					            	<span ng-show="orderByField == 'cost'"><span ng-show="!reverseSort">^</span><span ng-show="reverseSort" class="sTxt">v</span></span>
					            </a>
					        </th>
				            <th>
				            	<a href="#" ng-click="orderByField='creationTime'; reverseSort = !reverseSort">Created at
					            	<span ng-show="orderByField == 'creationTime'"><span ng-show="!reverseSort">^</span><span ng-show="reverseSort" class="sTxt">v</span></span>
					            </a>
				            </th>
				            <th>
				            	<a href="#" ng-click="orderByField='deletionTime'; reverseSort = !reverseSort">Destroyed at
					            	<span ng-show="orderByField == 'deletionTime'"><span ng-show="!reverseSort">^</span><span ng-show="reverseSort" class="sTxt">v</span></span>
					            </a>
				            </th>
				        </tr>
				    </thead>
				    <tbody>
				        <tr ng-repeat="machine in cloudspace.machines | orderBy:orderByField:reverseSort">
				            <td>{[ machine.name ]}</td>
				            <td>{[ machine.cost | currency:"USD$" ]}</td>
				            <td>{[ machine.creationTime * 1000 | date:'dd/MM/yyyy h:mma' ]}</td>
				            <td>
				            	<span ng-show="machine.deletiontime.length">{[ machine.deletiontime * 1000 | date:'dd/MM/yyyy h:mma' ]}</span>
				            </td>
					     </tr>
					</tbody>
				</table>
				<hr />
			</div>
	</div>
</div>
<script src="/$$space/.files/js/controllers/Billing/UsageController.js" type="text/javascript"></script>
}}
