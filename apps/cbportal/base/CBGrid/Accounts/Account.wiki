@usedefault

@@title Account: ${name}
{{Account id:$$id}}
{% if id %}
h2. Account: ${name}

{{actions:
- display: Disable
  action: /restmachine/cloudbroker/account/disable
  data:
   accountId: $$id
   async: true
  input:
  - reason

- display: Enable
  action: /restmachine/cloudbroker/account/enable
  data:
   accountId: $$id
  input:
  - reason

- display: Delete
  action: /restmachine/cloudbroker/account/delete
  data:
   accountId: $$id
  input:
  - reason

- display: Grant User Access
  action: /restmachine/cloudbroker/account/addUser
  hide: true
  data:
   accountId: $$id
  input:
  - name: username
    label: Username or email address (an invitation will be sent to unregistered emails)
    type: text
  - name: accesstype
    type: dropdown
    label: ACL
    values:
     - label: Admin
       value: ARCXDU
     - label: Write
       value: RCX
     - label: Read
       value: R

- display: Revoke User Access
  action: /restmachine/cloudbroker/account/deleteUser
  hide: true
  data:
   accountId: $$id
  input:
  - name: recursivedelete
    type: dropdown
    label: Do you want to recursively remove user permissions from all owned cloudspaces and vmachines?
    values:
     - label: Yes
       value: true
     - label: No
       value: false

- display: Change Credit
  action: /restmachine/cloudbroker/finance/changeCredit
  hide: true
  data:
   accountname: ${name}
  input:
  - name: amount
    label: Credit Amount (can be negative)
    type: number
  - name: message
    label: Reason for transaction
    type: text

- display: Rename
  action: /restmachine/cloudbroker/account/rename
  data:
   accountId: $$id
  input:
  - name
}}

{{createspace: accountId:$$id}}

h3. Details
|*Account ID*|$$id|
|*Location*|${DCLocation}|
|*Status*|${status}|
|*Balance (current USD in account)*|${balance}|

h3. Users Access
{{action: id:'action-GrantUserAccess' class:'glyphicon glyphicon-plus margin-bottom-medium margin-left-medium' label:'Grant User Access'}}
||User Name||E-Mail||ACL||Status||Revoke Access||
{% for user in users -%}
    | {%if user.userstatus!='INVITED' %} [${user.id}|/CBGrid/user?id=${user.id}] {%else%} ${user.id} {% endif %} |${", ".join(user.emails)}|${user.acl}|${user.userstatus if user.userstatus else 'N/A'}|{{action deleterow:true id:'action-RevokeUserAccess' data-username:'${user.id}' class:'glyphicon glyphicon-remove'}}|
{% endfor %}

h3. Cloud Spaces
{{action: id:'create_space' class:'glyphicon glyphicon-plus margin-bottom-medium margin-left-medium' label:'Add Cloud Space'}}
{{cbspaces: accountId:$$id}}

h3. Credit Transactions

{{action: id:'action-ChangeCredit' class:'glyphicon glyphicon-plus margin-bottom-medium margin-left-medium' label:'Add Credit'}}
{{transactions: accountId:$$id}}

{% else %}
No account provided
{% endif %}
